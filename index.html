<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyni Chat - Multi-Provider LLM Interface with ASR</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <span>ü§ñ</span>
                <span>Hyni Chat - Multi-Provider LLM Interface</span>
                <span class="badge-new">Now with Voice Input! üé§</span>
            </h1>
        </header>

        <div class="main-grid">
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Provider Selection -->
                <div class="section">
                    <div class="section-title">Provider & Model</div>
                    <select id="provider-select" class="provider-select">
                        <option value="">Select Provider...</option>
                        <option value="openai">OpenAI</option>
                        <option value="claude">Claude (Anthropic)</option>
                        <option value="deepseek">DeepSeek</option>
                        <option value="mistral">Mistral</option>
                    </select>
                    <select id="model-select" class="model-select" style="margin-top: 10px;" disabled>
                        <option value="">Select Model...</option>
                    </select>
                </div>

                <!-- API Keys -->
                <div class="section">
                    <div class="section-title">API Keys</div>
                    <div id="api-keys-container"></div>
                    <div class="file-upload">
                        <input type="file" id="file-input" class="file-input" accept=".hynirc,.txt">
                        <label for="file-input" class="file-label">üìÅ Load from .hynirc</label>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="message-count">0</div>
                        <div class="stat-label">Messages</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="token-count">0</div>
                        <div class="stat-label">Tokens</div>
                    </div>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-container">
                <div class="chat-header">
                    <div>
                        <span id="current-provider">No provider selected</span>
                        <span id="current-model" style="color: #666; font-size: 14px; margin-left: 10px;"></span>
                        <span id="broadcast-indicator" class="broadcast-indicator" style="display: none; margin-left: 10px;">BROADCAST MODE</span>
                    </div>
                    <button id="clear-chat" class="btn-small btn-danger">Clear Chat</button>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <div style="text-align: center; color: #999; padding: 40px;">
                        Select a provider and enter your API key to start chatting<br>
                        <small>You can use text input or voice input (ASR)</small>
                    </div>
                </div>

                <!-- Input container will be populated by InputManager -->
                <div class="chat-input-container">
                    <!-- Dynamic content will be inserted here by InputManager -->
                </div>
            </div>
        </div>
    </div>

    <!-- Load WASM module first -->
    <script src="modules/asr/wstream_wasm.js"></script>

    <script type="module">
        import { HyniChat } from './hyni-chat.js';

        // Initialize when page loads
        window.addEventListener('load', async () => {
            window.hyniChat = new HyniChat();
        });
    </script>
</body>
</html>
